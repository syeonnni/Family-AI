# IoU 
- Intersection over Union 
- 전체 영역 중 겹치는 영역 정도 
![[Pasted image 20250123013432.png]]
- IoU의 계산 결과 값이 0.5 이상이면 검출(TP)라고 판단 
- 만약 0.5 미만이면 잘못 검출(FP)되었다고 판단 


**객체 검출 모델 평가: 정밀도, 재현율, IoU, 평균 정밀도(AP)**

- 출력 결과는 객체 위치 검출이 잘 된 듯 보이지만, 실제 값과 예측 경계 상자 간 차이 존재.
- 모델 성능 평가를 위해 IoU 기반 평균 정밀도(Average Precision, AP) 사용.
- 평균 정밀도 계산에 정밀도(Precision), 재현율(Recall), IoU 사용.

**정밀도(Precision)**
- 모델이 참으로 예측한 것 중 실제 참값 비율.
- `Precision = TP / (TP + FP)`
- TP(True Positive): 참/긍정, FP(False Positive): 거짓/긍정.
- 모델 예측 정확도 지표, 참으로 예측한 것 중 맞은 비율.

**재현율(Recall)**
- 실제 참값 중 모델이 참으로 예측한 비율.
- `Recall = TP / (TP + FN)`
- FN(False Negative): 거짓/부정.
- 실제 참값 데이터를 모델이 얼마나 잘 찾았는지 나타내는 지표.

**평균 정밀도(Mean Average Precision, mAP) 계산**
1. 모델 검출 경계 상자 정확도 기준 내림차순 정렬.
2. 각 경계 상자에 대해 TP, FP, FN 계산.
    - TP: 모델 검출 경계 상자와 실제 객체 IoU가 일정 기준 이상.
    - FP: 모델 검출 경계 상자와 실제 객체 IoU가 일정 기준 미만.
    - FN: 실제 객체와 IoU가 일정 기준 이상인 경우 제외.
3. 정밀도, 재현율 계산.
4. 정밀도-재현율 곡선(X축: 재현율, Y축: 정밀도) 그림.
5. 정밀도-재현율 곡선 아래 면적 계산하여 AP 산출.
![[Pasted image 20250123013717.png]]

**mAP(mean Average Precision)**
- 일반적으로 다양한 정확도에 대한 AP 계산 후 평균, mAP 사용.
- AP 평균값 의미.
- AP@0.5, AP@0.5:0.95
	- 평균 점밀도는 흔히 뒤에 추가로 '@0.5' 등 형태의 어떤 숫자로 표기하는 경우
	- AP@0.5의 경우 IoU Threshold를 0.5로 설정하였을 때의 평균 정밀도 값
	- AP@0.5:0.95의 경우 IoU Threshold를 0.5, 0.55, 0.6, … , 0.9, 0.95 등 여러 값을 사용하여 계산한 평균 정밀도 값

**핵심 요약**
- 객체 검출 모델 평가는 정밀도, 재현율, IoU, AP, mAP 사용.
- 정밀도는 모델 예측 정확도, 재현율은 실제 참값 검출 능력 지표.
- AP는 정밀도-재현율 곡선 아래 면적, mAP는 AP 평균값으로 모델 성능 종합 평가.